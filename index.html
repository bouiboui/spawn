<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Spawn : Spawn and monitor processes from your command-line.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Spawn</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/bouiboui/spawn">View on GitHub</a>

          <h1 id="project_title">Spawn</h1>
          <h2 id="project_tagline">Spawn and monitor processes from your command-line.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/bouiboui/spawn/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/bouiboui/spawn/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>Recently I've worked on several projects that call micro-processes for simple tasks (sending JSON data to a webservice, uploading a file, sending an email) in bulk, with sensibly different arguments. Spawn is a command-line utility that makes these calls and displays the progress with a progress bar like so:</p>

<div class="highlight highlight-source-shell"><pre>[Spawn] Starting 3 process(es)
 1/3 [<span class="pl-k">=========&gt;</span>------------------]  33% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>send_updates.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>data/client1.json<span class="pl-pds">'</span></span>) 4 secs/12 secs 1.2 MiB
 2/3 [<span class="pl-k">==================&gt;</span>---------]  66% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>send_updates.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>data/client2.json<span class="pl-pds">'</span></span>) 9 secs/14 secs 1.2 MiB
 3/3 [<span class="pl-k">============================</span>] 100% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>send_updates.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>data/client3.json<span class="pl-pds">'</span></span>) 14 secs/14 secs 1.2 MiB</pre></div>

<p><strong>Spawn is not intended to be launched from a remote server, only from your local command line.</strong></p>

<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h2>

<p><strong>Windows</strong></p>

<p><a href="https://github.com/bouiboui/spawn/releases/download/0.3/spawn.phar">Download spawn.phar from the latest release</a></p>

<p><strong>Linux/MacOS</strong></p>

<div class="highlight highlight-source-shell"><pre>wget https://github.com/bouiboui/spawn/releases/download/0.3/spawn.phar
chmod +x spawn.phar

<span class="pl-c"># To call `spawn` from anywhere:</span>
sudo mv spawn.phar /usr/local/bin/spawn</pre></div>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>Run a process with arguments separated by spaces</p>

<div class="highlight highlight-source-shell"><pre>./spawn.phar php send_latest_invoices.php startdate=2016-01-01

[Spawn] Starting 1 process(es)
 1/1 [<span class="pl-k">============================</span>] 100% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>send_latest_invoices.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>startdate=2016-01-01<span class="pl-pds">'</span></span>) 13 secs/13 secs 1.2 MiB</pre></div>

<p>Add a numerical range in the arguments</p>

<div class="highlight highlight-source-shell"><pre>./spawn.phar php convert_pdfs.php document{1-42}.pdf

[Spawn] Starting 42 process(es)
  4/42 [<span class="pl-k">==&gt;</span>-------------------------]   9% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document4.pdf<span class="pl-pds">'</span></span>) <span class="pl-k">&lt;</span> 1 sec/<span class="pl-k">&lt;</span> 1 sec 1.2 MiB
  8/42 [<span class="pl-k">=====&gt;</span>----------------------]  19% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document8.pdf<span class="pl-pds">'</span></span>)  1 sec/5 secs 1.2 MiB
 12/42 [<span class="pl-k">========&gt;</span>-------------------]  28% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document12.pdf<span class="pl-pds">'</span></span>) 2 secs/7 secs 1.2 MiB
 16/42 [<span class="pl-k">==========&gt;</span>-----------------]  38% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document16.pdf<span class="pl-pds">'</span></span>) 3 secs/8 secs 1.2 MiB
 20/42 [<span class="pl-k">=============&gt;</span>--------------]  47% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document20.pdf<span class="pl-pds">'</span></span>) 4 secs/8 secs 1.2 MiB
 24/42 [<span class="pl-k">================&gt;</span>-----------]  57% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document24.pdf<span class="pl-pds">'</span></span>) 5 secs/9 secs 1.2 MiB
 28/42 [<span class="pl-k">==================&gt;</span>---------]  66% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document28.pdf<span class="pl-pds">'</span></span>) 6 secs/9 secs 1.2 MiB
 32/42 [<span class="pl-k">=====================&gt;</span>------]  76% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document32.pdf<span class="pl-pds">'</span></span>) 6 secs/8 secs 1.2 MiB
 36/42 [<span class="pl-k">========================&gt;</span>---]  85% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document36.pdf<span class="pl-pds">'</span></span>) 7 secs/8 secs 1.2 MiB
 40/42 [<span class="pl-k">==========================&gt;</span>-]  95% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document40.pdf<span class="pl-pds">'</span></span>) 8 secs/8 secs 1.2 MiB
 42/42 [<span class="pl-k">============================</span>] 100% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>convert_pdfs.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>document42.pdf<span class="pl-pds">'</span></span>) 9 secs/9 secs 1.2 MiB
</pre></div>

<p>Make GET calls to an URL with a range</p>

<div class="highlight highlight-source-shell"><pre>./spawn.phar curl http://webservice/api/v1/customers/{1-3}/

[Spawn] Starting 3 process(es)
 1/3 [<span class="pl-k">=========&gt;</span>------------------]  33% (<span class="pl-s"><span class="pl-pds">'</span>curl<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>http://webservice/api/v1/customers/1/<span class="pl-pds">'</span></span>) 4 secs/12 secs 1.2 MiB
 2/3 [<span class="pl-k">==================&gt;</span>---------]  66% (<span class="pl-s"><span class="pl-pds">'</span>curl<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>http://webservice/api/v1/customers/2/<span class="pl-pds">'</span></span>) 5 secs/8 secs 1.2 MiB
 3/3 [<span class="pl-k">============================</span>] 100% (<span class="pl-s"><span class="pl-pds">'</span>curl<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>http://webservice/api/v1/customers/3/<span class="pl-pds">'</span></span>) 9 secs/9 secs 1.2 MiB</pre></div>

<p>POST JSON files from a directory to an URL</p>

<ul>
<li>Important: use <code>--</code> or Spawn will try to parse curl options</li>
<li>
<code>-d @</code> before the filename sends the contents of the file</li>
</ul>

<div class="highlight highlight-source-shell"><pre>./spawn.phar -- curl -XPOST -H <span class="pl-s"><span class="pl-pds">"</span>Content-type: application/json<span class="pl-pds">"</span></span> -d @json/invoices http://webservice/api/v1/invoices/

[Spawn] Starting 3 process(es)
 1/3 [<span class="pl-k">=========&gt;</span>------------------]  33% (<span class="pl-s"><span class="pl-pds">"</span>curl<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>-XPOST<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>-H<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>Content-type: application/json<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>-d<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>@json/invoices/january-april.json<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>http://webservice/api/v1/invoices/<span class="pl-pds">"</span></span>)  1 sec/3 secs 1.2 MiB
 2/3 [<span class="pl-k">==================&gt;</span>---------]  66% (<span class="pl-s"><span class="pl-pds">"</span>curl<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>-XPOST<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>-H<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>Content-type: application/json<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>-d<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>@json/invoices/may-august.json<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>http://webservice/api/v1/invoices/<span class="pl-pds">"</span></span>)  1 sec/2 secs 1.5 MiB
 3/3 [<span class="pl-k">============================</span>] 100% (<span class="pl-s"><span class="pl-pds">"</span>curl<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>-XPOST<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>-H<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>Content-type: application/json<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>-d<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>@json/invoices/september-december.json<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>http://webservice/api/v1/invoices/<span class="pl-pds">"</span></span>) 2 secs/2 secs 1.5 MiB</pre></div>

<p>Run process for each file in a directory, filtered by the .json extension</p>

<div class="highlight highlight-source-shell"><pre>./spawn.phar php get_gravatar.php data/users --find=<span class="pl-k">*</span>.json

[Spawn] Starting 3 process(es)
 1/3 [<span class="pl-k">=========&gt;</span>------------------]  33% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>get_gravatar.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>data/users/martin-fowler.json<span class="pl-pds">'</span></span>) 4 secs/12 secs 1.2 MiB
 2/3 [<span class="pl-k">==================&gt;</span>---------]  66% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>get_gravatar.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>data/users/rasmus-lerdorf.json<span class="pl-pds">'</span></span>) 5 secs/8 secs 1.2 MiB
 3/3 [<span class="pl-k">============================</span>] 100% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>get_gravatar.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>data/users/aaron-saray.json<span class="pl-pds">'</span></span>) 9 secs/9 secs 1.2 MiB</pre></div>

<p>Save output to a file</p>

<div class="highlight highlight-source-shell"><pre>./spawn.phar php get_twitter_handle.php data/users --outfile=handles.txt

<span class="pl-c"># handles.txt</span>
$ php get_twitter_handle.php <span class="pl-s"><span class="pl-pds">"</span>data/users/martin-fowler.json<span class="pl-pds">"</span></span>
@martinfowler

$ php get_twitter_handle.php <span class="pl-s"><span class="pl-pds">"</span>data/users/rasmus-lerdorf.json<span class="pl-pds">"</span></span>
@rasmus

$ php get_twitter_handle.php <span class="pl-s"><span class="pl-pds">"</span>data/users/aaron-saray.json<span class="pl-pds">"</span></span>
@aaronsaray</pre></div>

<p>Verbose mode</p>

<div class="highlight highlight-source-shell"><pre>./spawn.phar php tests/test.php tests/data -vvv

[Spawn] Starting 3 process(es)
  RUN  <span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/test.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/data/1.txt<span class="pl-pds">'</span></span>
  OUT  Contents from 1.txt
  RES  Command ran successfully
 1/3 [<span class="pl-k">=========&gt;</span>------------------]  33% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/test.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/data/1.txt<span class="pl-pds">'</span></span>) <span class="pl-k">&lt;</span> 1 sec/<span class="pl-k">&lt;</span> 1 sec 2.5 MiB  
  RUN  <span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/test.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/data/2.txt<span class="pl-pds">'</span></span>
  OUT  Contents from 2.txt
  RES  Command ran successfully
 2/3 [<span class="pl-k">==================&gt;</span>---------]  66% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/test.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/data/2.txt<span class="pl-pds">'</span></span>) 2 secs/3 secs 2.5 MiB  
  RUN  <span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/test.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/data/3.txt<span class="pl-pds">'</span></span>
  OUT  Contents from 3.txt
  RES  Command ran successfully
 3/3 [<span class="pl-k">============================</span>] 100% (<span class="pl-s"><span class="pl-pds">'</span>php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/test.php<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>tests/data/3.txt<span class="pl-pds">'</span></span>) 3 secs/3 secs 2.5 MiB%   </pre></div>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Credits</h2>

<ul>
<li>bouiboui — <a href="https://github.com/bouiboui">Github</a> <a href="https://twitter.com/j_____________n">Twitter</a> <a href="http://cod3.net">Website</a>
</li>
<li><a href="https://github.com/bouiboui/spawn/graphs/contributors">All contributors</a></li>
</ul>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>Unlicense. Public domain, basically. Please treat it kindly. See <a href="LICENSE">License File</a> for more information. </p>

<p>This project uses the following open source projects </p>

<ul>
<li>
<a href="https://github.com/symfony/process">symfony/process</a> by <a href="https://github.com/fabpot">Fabien Potencier</a> — <a href="https://github.com/symfony/process/blob/master/LICENSE">License</a>.</li>
<li>
<a href="https://github.com/symfony/console">symfony/console</a> by <a href="https://github.com/fabpot">Fabien Potencier</a> — <a href="https://github.com/symfony/console/blob/master/LICENSE">License</a>.</li>
<li>
<a href="https://github.com/sebastianbergmann/phpunit">phpunit/phpunit</a> by <a href="https://github.com/sebastianbergmann">Sebastian Bergmann</a> — <a href="https://github.com/sebastianbergmann/phpunit/blob/master/LICENSE">License</a>.</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Spawn maintained by <a href="https://github.com/bouiboui">bouiboui</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
